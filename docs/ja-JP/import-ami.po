#Licensed to the Apache Software Foundation (ASF) under one
#or more contributor license agreements.  See the NOTICE file
#distributed with this work for additional information
#regarding copyright ownership.  The ASF licenses this file
#to you under the Apache License, Version 2.0 (the
#"License"); you may not use this file except in compliance
#with the License.  You may obtain a copy of the License at
#http://www.apache.org/licenses/LICENSE-2.0
#Unless required by applicable law or agreed to in writing,
#software distributed under the License is distributed on an
#"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#KIND, either express or implied.  See the License for the
#specific language governing permissions and limitations
#under the License.
# 
# Translators:
# Go Chiba <go.chiba@gmail.com>, 2013.
msgid ""
msgstr ""
"Project-Id-Version: Apache CloudStack Docs\n"
"POT-Creation-Date: 2013-03-19T13:38:04\n"
"PO-Revision-Date: 2013-03-24 01:00+0000\n"
"Last-Translator: go_chiba <go.chiba@gmail.com>\n"
"Language-Team: None\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: ja_JP\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#. Tag: title
#, no-c-format
msgid "Importing Amazon Machine Images"
msgstr "AMI のインポート"

#. Tag: para
#, no-c-format
msgid ""
"The following procedures describe how to import an Amazon Machine Image "
"(AMI) into &PRODUCT; when using the XenServer hypervisor."
msgstr "次の手順では、XenServer ハイパーバイザーを使用する場合に、AMI(Amazon Machine Image)を &PRODUCT;にインポートする方法を説明します。"

#. Tag: para
#, no-c-format
msgid ""
"Assume you have an AMI file and this file is called CentOS_6.2_x64. Assume "
"further that you are working on a CentOS host. If the AMI is a Fedora image,"
" you need to be working on a Fedora host initially."
msgstr "AMI ファイルがあり、そのファイルが CentOS_6.2_x64 という名前である ことを前提としています。さらに、CentOS ホストで作業することを前提と しています。AMI が Fedora イメージである場合は、まず Fedora ホストで作業する必要があります。"

#. Tag: para
#, no-c-format
msgid ""
"You need to have a XenServer host with a file-based storage repository "
"(either a local ext3 SR or an NFS SR) to convert to a VHD once the image "
"file has been customized on the Centos/Fedora host."
msgstr "注:イメージファイルを Centos/Fedora ホストでカスタマイズした後に VHD に変換する場合は、ファイルベースのストレージリポジトリ(ローカ ル ext3 または NFS のどちらか)を持つ XenServer ホストが必要です。"

#. Tag: para
#, no-c-format
msgid ""
"When copying and pasting a command, be sure the command has pasted as a "
"single line before executing. Some document viewers may introduce unwanted "
"line breaks in copied text."
msgstr "コマンドをコピーして実行するときは、単一の行として貼り付けたことを確認してください。一部のドキュメントビューアーでは、コピーしたテキストに不要な改行が含まれる可能性があります。"

#. Tag: para
#, no-c-format
msgid "To import an AMI:"
msgstr "AMI をインポートするには"

#. Tag: para
#, no-c-format
msgid "Set up loopback on image file:"
msgstr "イメージファイルでループバックをセットアップします。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# mkdir -p /mnt/loop/centos62\n"
"# mount -o loop  CentOS_6.2_x64 /mnt/loop/centos54\n"
msgstr "# mkdir -p /mnt/loop/centos62\n# mount -o loop  CentOS_6.2_x64 /mnt/loop/centos54\n"

#. Tag: para
#, no-c-format
msgid ""
"Install the kernel-xen package into the image. This downloads the PV kernel "
"and ramdisk to the image."
msgstr "kernel-xen パッケージをイメージにインストールします。これにより、PV カーネルおよび RAM ディスクがイメージにダウンロードされます。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# yum -c /mnt/loop/centos54/etc/yum.conf --installroot=/mnt/loop/centos62/ "
"-y install kernel-xen"
msgstr "# yum -c /mnt/loop/centos54/etc/yum.conf --installroot=/mnt/loop/centos62/ -y install kernel-xen"

#. Tag: para
#, no-c-format
msgid "Create a grub entry in /boot/grub/grub.conf."
msgstr "grub エントリを/boot/grub/grub.conf に作成します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# mkdir -p /mnt/loop/centos62/boot/grub\n"
"# touch /mnt/loop/centos62/boot/grub/grub.conf\n"
"# echo \"\" &gt; /mnt/loop/centos62/boot/grub/grub.conf\n"
msgstr "# mkdir -p /mnt/loop/centos62/boot/grub\n# touch /mnt/loop/centos62/boot/grub/grub.conf\n# echo \"\" &gt; /mnt/loop/centos62/boot/grub/grub.conf\n"

#. Tag: para
#, no-c-format
msgid ""
"Determine the name of the PV kernel that has been installed into the image."
msgstr "イメージにインストールされた PV カーネルの名前を確認します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# cd /mnt/loop/centos62\n"
"# ls lib/modules/\n"
"2.6.16.33-xenU  2.6.16-xenU  2.6.18-164.15.1.el5xen  2.6.18-164.6.1.el5.centos.plus  2.6.18-xenU-ec2-v1.0  2.6.21.7-2.fc8xen  2.6.31-302-ec2\n"
"# ls boot/initrd*\n"
"boot/initrd-2.6.18-164.6.1.el5.centos.plus.img boot/initrd-2.6.18-164.15.1.el5xen.img\n"
"# ls boot/vmlinuz*\n"
"boot/vmlinuz-2.6.18-164.15.1.el5xen  boot/vmlinuz-2.6.18-164.6.1.el5.centos.plus  boot/vmlinuz-2.6.18-xenU-ec2-v1.0  boot/vmlinuz-2.6.21-2952.fc8xen\n"
"\t\t\t"
msgstr "# cd /mnt/loop/centos62\n# ls lib/modules/\n2.6.16.33-xenU  2.6.16-xenU  2.6.18-164.15.1.el5xen  2.6.18-164.6.1.el5.centos.plus  2.6.18-xenU-ec2-v1.0  2.6.21.7-2.fc8xen  2.6.31-302-ec2\n# ls boot/initrd*\nboot/initrd-2.6.18-164.6.1.el5.centos.plus.img boot/initrd-2.6.18-164.15.1.el5xen.img\n# ls boot/vmlinuz*\nboot/vmlinuz-2.6.18-164.15.1.el5xen  boot/vmlinuz-2.6.18-164.6.1.el5.centos.plus  boot/vmlinuz-2.6.18-xenU-ec2-v1.0  boot/vmlinuz-2.6.21-2952.fc8xen\n\t\t\t"

#. Tag: para
#, no-c-format
msgid ""
"Xen kernels/ramdisk always end with \"xen\". For the kernel version you "
"choose, there has to be an entry for that version under lib/modules, there "
"has to be an initrd and vmlinuz corresponding to that. Above, the only "
"kernel that satisfies this condition is 2.6.18-164.15.1.el5xen."
msgstr "Xen カーネルおよび RAM ディスクの名前は、常に「xen」で終わります。選択したカーネルバージョンに応じて、 lib/modules にそのバージョンのエントリがあり、それに対応する initrd と vmlinuz があるはずです。上の例では、この条件を満たす唯一のカーネルは 2.6.18-164.15.1.el5xen です。"

#. Tag: para
#, no-c-format
msgid ""
"Based on your findings, create an entry in the grub.conf file. Below is an "
"example entry."
msgstr "調べた結果に基づいて、grub.conf ファイルにエントリを作成します。エントリの例を次に示します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"default=0\n"
"timeout=5\n"
"hiddenmenu\n"
"title CentOS (2.6.18-164.15.1.el5xen)\n"
"        root (hd0,0)\n"
"        kernel /boot/vmlinuz-2.6.18-164.15.1.el5xen ro root=/dev/xvda \n"
"        initrd /boot/initrd-2.6.18-164.15.1.el5xen.img\n"
msgstr "default=0\ntimeout=5\nhiddenmenu\ntitle CentOS (2.6.18-164.15.1.el5xen)\n        root (hd0,0)\n        kernel /boot/vmlinuz-2.6.18-164.15.1.el5xen ro root=/dev/xvda \n        initrd /boot/initrd-2.6.18-164.15.1.el5xen.img\n"

#. Tag: para
#, no-c-format
msgid ""
"Edit etc/fstab, changing “sda1” to “xvda” and changing “sdb” to “xvdb”."
msgstr "etc/fstab を編集します。「sda1」を「xvda」に、「sdb」を「xvdb」に変更します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# cat etc/fstab\n"
"/dev/xvda  /         ext3    defaults        1 1\n"
"/dev/xvdb  /mnt      ext3    defaults        0 0\n"
"none       /dev/pts  devpts  gid=5,mode=620  0 0\n"
"none       /proc     proc    defaults        0 0\n"
"none       /sys      sysfs   defaults        0 0\n"
msgstr "# cat etc/fstab\n/dev/xvda  /         ext3    defaults        1 1\n/dev/xvdb  /mnt      ext3    defaults        0 0\nnone       /dev/pts  devpts  gid=5,mode=620  0 0\nnone       /proc     proc    defaults        0 0\nnone       /sys      sysfs   defaults        0 0\n"

#. Tag: para
#, no-c-format
msgid ""
"Enable login via the console. The default console device in a XenServer "
"system is xvc0. Ensure that etc/inittab and etc/securetty have the following"
" lines respectively:"
msgstr "コンソール経由でのログオンを有効にします。XenServer システムのデフォルトのコンソールデバイスは xvc0 です。 etc/inittab と etc/securetty に、それぞれ次の行があることを確認します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# grep xvc0 etc/inittab \n"
"co:2345:respawn:/sbin/agetty xvc0 9600 vt100-nav\n"
"# grep xvc0 etc/securetty \n"
"xvc0\n"
msgstr "# grep xvc0 etc/inittab \nco:2345:respawn:/sbin/agetty xvc0 9600 vt100-nav\n# grep xvc0 etc/securetty \nxvc0\n"

#. Tag: para
#, no-c-format
msgid ""
"Ensure the ramdisk supports PV disk and PV network. Customize this for the "
"kernel version you have determined above."
msgstr "RAM ディスクが PV ディスクと PV ネットワークをサポートしていることを確認します。上の例で確認したカーネルバー ジョンに合わせて、これをカスタマイズします。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# chroot /mnt/loop/centos54\n"
"# cd /boot/\n"
"# mv initrd-2.6.18-164.15.1.el5xen.img initrd-2.6.18-164.15.1.el5xen.img.bak\n"
"# mkinitrd -f /boot/initrd-2.6.18-164.15.1.el5xen.img --with=xennet --preload=xenblk --omit-scsi-modules 2.6.18-164.15.1.el5xen\n"
msgstr "# chroot /mnt/loop/centos54\n# cd /boot/\n# mv initrd-2.6.18-164.15.1.el5xen.img initrd-2.6.18-164.15.1.el5xen.img.bak\n# mkinitrd -f /boot/initrd-2.6.18-164.15.1.el5xen.img --with=xennet --preload=xenblk --omit-scsi-modules 2.6.18-164.15.1.el5xen\n"

#. Tag: para
#, no-c-format
msgid "Change the password."
msgstr "パスワードを変更します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# passwd\n"
"Changing password for user root.\n"
"New UNIX password: \n"
"Retype new UNIX password: \n"
"passwd: all authentication tokens updated successfully.\n"
msgstr "# passwd\nChanging password for user root.\nNew UNIX password: \nRetype new UNIX password: \npasswd: all authentication tokens updated successfully.\n"

#. Tag: para
#, no-c-format
msgid "Exit out of chroot."
msgstr "chroot を終了します。"

#. Tag: programlisting
#, no-c-format
msgid "# exit"
msgstr "# exit"

#. Tag: para
#, no-c-format
msgid ""
"Check etc/ssh/sshd_config for lines allowing ssh login using a password."
msgstr "etc/ssh/sshd_config の、パスワードを使用して ssh ログオンを許可する行を確認します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# egrep \"PermitRootLogin|PasswordAuthentication\" /mnt/loop/centos54/etc/ssh/sshd_config  \n"
"PermitRootLogin yes\n"
"PasswordAuthentication yes\n"
msgstr "# egrep \"PermitRootLogin|PasswordAuthentication\" /mnt/loop/centos54/etc/ssh/sshd_config  \nPermitRootLogin yes\nPasswordAuthentication yes\n"

#. Tag: para
#, no-c-format
msgid ""
"If you need the template to be enabled to reset passwords from the &PRODUCT;"
" UI or API, install the password change script into the image at this point."
" See <xref linkend=\"add-password-management-to-templates\" />."
msgstr "テンプレートのパスワードを &PRODUCT; ユーザーインターフェイスまたは API からリセットできるようにする必要がある場合は、この時点でパスワード変更スクリプトをイメージにインストールします。<xref linkend=\"add-password-management-to-templates\" />を参照してください。"

#. Tag: para
#, no-c-format
msgid "Unmount and delete loopback mount."
msgstr "ループバックマウントを解除して削除します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# umount /mnt/loop/centos54\n"
"# losetup -d /dev/loop0\n"
msgstr "# umount /mnt/loop/centos54\n# losetup -d /dev/loop0\n"

#. Tag: para
#, no-c-format
msgid ""
"Copy the image file to your XenServer host's file-based storage repository. "
"In the example below, the Xenserver is \"xenhost\". This XenServer has an "
"NFS repository whose uuid is a9c5b8c8-536b-a193-a6dc-51af3e5ff799."
msgstr "イメージファイルを XenServer ホストのファイルベースのストレージリポジトリにコピーします。次の例では、 Xenserver は「xenhost」です。この XenServer は、UUID が a9c5b8c8-536b-a193-a6dc-51af3e5ff799 である NFS リポジトリを持っています。"

#. Tag: programlisting
#, no-c-format
msgid ""
"# scp CentOS_6.2_x64 xenhost:/var/run/sr-mount/a9c5b8c8-536b-a193-a6dc-"
"51af3e5ff799/"
msgstr "# scp CentOS_6.2_x64 xenhost:/var/run/sr-mount/a9c5b8c8-536b-a193-a6dc-51af3e5ff799/"

#. Tag: para
#, no-c-format
msgid "Log in to the Xenserver and create a VDI the same size as the image."
msgstr "Xenserver にログオンして、イメージと同じサイズの VDI を作成します。"

#. Tag: programlisting
#, no-c-format
msgid ""
"[root@xenhost ~]# cd /var/run/sr-mount/a9c5b8c8-536b-a193-a6dc-51af3e5ff799\n"
"[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]#  ls -lh CentOS_6.2_x64\n"
"-rw-r--r-- 1 root root 10G Mar 16 16:49 CentOS_6.2_x64\n"
"[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# xe vdi-create virtual-size=10GiB sr-uuid=a9c5b8c8-536b-a193-a6dc-51af3e5ff799 type=user name-label=\"Centos 6.2 x86_64\"\n"
"cad7317c-258b-4ef7-b207-cdf0283a7923\n"
msgstr "[root@xenhost ~]# cd /var/run/sr-mount/a9c5b8c8-536b-a193-a6dc-51af3e5ff799\n[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]#  ls -lh CentOS_6.2_x64\n-rw-r--r-- 1 root root 10G Mar 16 16:49 CentOS_6.2_x64\n[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# xe vdi-create virtual-size=10GiB sr-uuid=a9c5b8c8-536b-a193-a6dc-51af3e5ff799 type=user name-label=\"Centos 6.2 x86_64\"\ncad7317c-258b-4ef7-b207-cdf0283a7923\n"

#. Tag: para
#, no-c-format
msgid "Import the image file into the VDI. This may take 10–20 minutes."
msgstr "イメージファイルを VDI にインポートします。これには 10~20 分かかる可能性があります。"

#. Tag: programlisting
#, no-c-format
msgid ""
"[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# xe vdi-import "
"filename=CentOS_6.2_x64 uuid=cad7317c-258b-4ef7-b207-cdf0283a7923"
msgstr "[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# xe vdi-import filename=CentOS_6.2_x64 uuid=cad7317c-258b-4ef7-b207-cdf0283a7923"

#. Tag: para
#, no-c-format
msgid ""
"Locate a the VHD file. This is the file with the VDI’s UUID as its name. "
"Compress it and upload it to your web server."
msgstr "VHD ファイルを見つけます。このファイルの名前には、VDI の UUID が含まれます。圧縮して Web サーバーにアップロードします。"

#. Tag: programlisting
#, no-c-format
msgid ""
"[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# bzip2 -c cad7317c-258b-4ef7-b207-cdf0283a7923.vhd &gt; CentOS_6.2_x64.vhd.bz2\n"
"[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# scp CentOS_6.2_x64.vhd.bz2 webserver:/var/www/html/templates/\n"
msgstr "[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# bzip2 -c cad7317c-258b-4ef7-b207-cdf0283a7923.vhd &gt; CentOS_6.2_x64.vhd.bz2\n[root@xenhost a9c5b8c8-536b-a193-a6dc-51af3e5ff799]# scp CentOS_6.2_x64.vhd.bz2 webserver:/var/www/html/templates/\n"
